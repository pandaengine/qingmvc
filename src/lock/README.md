
# flock
# 读的时候加锁(lock_sh),写的时候也进行加锁(lock_ex)

- LOCK_SH|共享锁，如果是读取，不需要等待，但如果是写入，需要等待读取完成。**
- LOCK_EX|独占锁，无论写入/读取都需要等待。**
- LOCK_UN，无论使用共享/读占锁，使用完后需要解锁。
- LOCK_NB，当被锁定时，不阻塞，而是提示锁定。

- 共享锁：Shared locks
- 独占锁：exclusive lock

# 如果不加锁，多个线程或进程同时对一文件进行操作，数据或丢失错乱
# 线程并发，同一片代码被同时执行